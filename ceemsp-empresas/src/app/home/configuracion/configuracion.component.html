<!-- Begin Page Content -->
<div class="container-fluid">

  <!-- Page Heading -->
  <div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Configuracion - General</h1>
    <!--div class="btn-group">
      <button class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">Editar</button>
      <button class="d-none d-sm-inline-block btn btn-sm btn-secondary shadow-sm" (click)="mostrarModalModalidades(mostrarModalidadesModal)">Ver modalidades</button>
      <button class="d-none d-sm-inline-block btn btn-sm btn-secondary shadow-sm" (click)="mostrarModalFormasEjecucion(mostrarModalidadesModal)">Ver formas de ejecucion</button>
      <div class="dropdown">
        <button class="d-none d-sm-inline-block btn btn-sm btn-secondary shadow-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Opciones
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="#">Descargar ficha informativa</a>
          <a class="dropdown-item" href="#">Modificar datos</a>
          <a class="dropdown-item" href="#">Cambiar usuario/contrasena</a>
          <a class="dropdown-item" href="#">Cambiar status</a>
        </div>
      </div>
    </div-->
  </div>

  <!-- Content Row -->
  <div class="row">
    <div class="col-sm-3">
      <div class="list-group">
        <a routerLink="/configuracion" class="list-group-item list-group-item-action active">
          General
        </a>
        <a routerLink="/configuracion/usuarios" class="list-group-item list-group-item-action">Usuarios CEEMSP</a>
        <a routerLink="/configuracion/notificaciones" class="list-group-item list-group-item-action">Notificaciones</a>
        <a routerLink="/configuracion/seguridad" class="list-group-item list-group-item-action">Seguridad</a>
        <a routerLink="/configuracion/acerca" class="list-group-item list-group-item-action">Acerca</a>
      </div>
    </div>
    <div class="col-sm-9" style="background: white">
      <table class="table">
        <tr>
          <td><b>Registro</b></td>
          <td>{{empresa?.registro}}</td>
        </tr>
        <tr>
          <td><b>Nombre comercial</b></td>
          <td>{{empresa?.nombreComercial}}</td>
        </tr>
        <tr>
          <td><b>Razon social</b></td>
          <td>{{empresa?.razonSocial}}</td>
        </tr>
        <tr>
          <td><b>RFC</b></td>
          <td>{{empresa?.rfc}}</td>
        </tr>
        <tr>
          <td><b>Tipo de persona</b></td>
          <td>{{empresa?.tipoPersona}}</td>
        </tr>
        <tr>
          <td><b>Tipo de tramite</b></td>
          <td>{{empresa?.tipoTramite}}</td>
        </tr>

        <tr *ngIf="empresa?.tipoPersona === 'FISICA'">
          <td><b>CURP</b></td>
          <td>{{empresa?.curp}}</td>
        </tr>
        <tr *ngIf="empresa?.tipoPersona === 'FISICA'">
          <td><b>Sexo</b></td>
          <td>{{empresa?.sexo}}</td>
        </tr>
      </table>
    </div>
  </div>

  <ng-template #mostrarModalidadesModal let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-survey-response">Ver modalidades </h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">Ã—</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-sm-12">
          <table class="table">
            <tr>
              <td><b>Modalidad</b></td>
              <td><b>Submodalidad</b></td>
              <td><b>Fecha Inicio</b></td>
              <td><b>Fecha Fin</b></td>
              <td><b>Acciones</b></td>
            </tr>
            <tr *ngFor="let m of empresaModalidades">
              <td>{{m.modalidad?.nombre}}</td>
              <td>
                <span *ngIf="m.submodalidad !== null">{{m.submodalidad?.nombre}}</span>
                <span *ngIf="m.submodalidad === null">NA</span>
              </td>
              <td>
                <span *ngIf="m.fechaInicio !== null">{{m.fechaInicio}}</span>
                <span *ngIf="m.fechaInicio === null">NA</span>
              </td>
              <td>
                <span *ngIf="m.fechaFin !== null">{{m.fechaFin}}</span>
                <span *ngIf="m.fechaFin === null">NA</span>
              </td>
              <td>
                <fa-icon [icon]="faPencil"></fa-icon>
                <fa-icon [icon]="faTrash"></fa-icon>
              </td>
            </tr>
            <tr *ngIf="!formularioModalidad">
              <td colspan="5">
                <button class="btn-primary btn-sm" (click)="mostrarFormularioModalidad()">Agregar modalidad</button>
              </td>
            </tr>
            <tr *ngIf="formularioModalidad">
              <td colspan="5">
                <div class="row">
                  <div class="col-sm-12">
                    <form [formGroup]="empresaModalidadForm" style="margin-top: 10px;">
                      <div class="form-row">
                        <div class="col-sm-3">
                          <label for="modalidad">
                            <b>Modalidad *</b>
                            <span *ngIf="empresaModalidadForm.controls['modalidad'].invalid && (empresaModalidadForm.controls['modalidad'].dirty || empresaModalidadForm.controls['modalidad'].touched)">
                              <i *ngIf="empresaModalidadForm.controls['modalidad'].errors.required" class="error-text"> - Campo requerido</i>
                            </span>
                          </label>
                          <select id="modalidad" class="form-control" formControlName="modalidad" (change)="seleccionarModalidad($event.target)">
                            <option *ngFor="let m of modalidades" value="{{m?.uuid}}">{{m?.nombre}}</option>
                          </select>
                        </div>
                        <div class="col-sm-3" *ngIf="modalidad?.tieneSubmodalidades">
                          <label for="submodalidad">
                            <b>Submodalidad</b>
                          </label>
                          <select id="submodalidad" class="form-control" formControlName="submodalidad">
                            <option *ngFor="let s of modalidad?.submodalidades" value="{{s?.uuid}}">{{s?.nombre}}</option>
                          </select>
                        </div>
                        <div class="col-sm-3" *ngIf="modalidad?.tipo === 'EAFJAL'">
                          <label for="numeroRegistroFederal">
                            <b>No. de Registro Federal</b>
                          </label>
                          <input class="form-control" id="numeroRegistroFederal" type="text" formControlName="numeroRegistroFederal" placeholder="Ejemplo. 156861215">
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="col-sm-3" *ngIf="modalidad?.tipo === 'EAFJAL'">
                          <label for="fechaInicio">
                            <b>Fecha de Inicio</b>
                          </label>
                          <input class="form-control" id="fechaInicio" type="date" formControlName="fechaInicio" placeholder="Fecha inicio">
                        </div>
                        <div class="col-sm-3" *ngIf="modalidad?.tipo === 'EAFJAL'">
                          <label for="fechaFin">
                            <b>Fecha de Fin</b>
                          </label>
                          <input class="form-control" id="fechaFin" type="date" formControlName="fechaFin" placeholder="Fecha fin">
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-12">
                    <button class="btn btn-sm btn-success" (click)="agregarModalidad(formularioModalidad)">Guardar cambios</button>
                    <button class="btn btn-sm btn-danger" (click)="ocultarFormularioModalidad()">Cancelar</button>
                  </div>
                </div>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Cerrar</button>
    </div>
  </ng-template>
</div>
